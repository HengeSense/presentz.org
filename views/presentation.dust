{>layout/}

{<body}
<section id="presentation">
  <div class="main">
    <h3>{talk_title|s}</h3>
    <h4>{speaker}</h4>

    <div id="player">
      <div id="container_player">
        <div id="player_video" class="box6">
        </div>
        <div id="slideshow_player" class="box6">
        </div>
      </div>
      <div class="clear"></div>
      <div id="controls">
        {!
          class="chapter past"
          class="chapter selected"
          class="chapter"
        !}
        {#slides}
        <div class="chapter" percentage="{percentage}" style="width:2px">
          <div class="info">
            <p class="title"><a chapter_index="{chapter_index}" slide_index="{slide_index}" href="javascript:void(0);">{title}</a> &mdash; {duration}</p>
            <div class="comments"><span>5</span><a href="javascript:void(0);">comments</a></div>
          </div>
        </div>
        {/slides}
      </div>
      <div id="tools">
        <h5>Tools</h5>
        <ul>
          {!
          <li><a href="javascript:void(0)">Show all comments</a></li>
          <li><a href="javascript:void(0)">Comment this slide</a></li>
          <li><a href="javascript:void(0)">Comment this presentation</a></li>
          !}
          <li><a href="javascript:toogle_css('#player .box8', '#chapters', 'display', 'none');">Show chapters list</a></li>
          {!<li><a href="javascript:toogle_css('#player .box8', '#embed', 'display', 'none');">Embed</a></li>!}
          <li><a href="javascript:toogle_css('#player .box8', '#share', 'display', 'none');">Share</a></li>
        </ul>
      </div>
      {! box commenti !}
      <div id="comments" class="box8" style="display:none;">
        <div class="content_comments">
          <h5>Comments</h5>
          {! da visualizzare solo quando siamo nei commenti della singola slide !}
          <div id="header_comment_slide" style="display:none;">
            <p class="box6 title">Comments on slide:<a href="javascript:void(0)">"Titolo slide 1"</a></p>
            <a href="javascript:void(0)" class="box2" id="remove_comment_filter">Remove Comment Filter</a>
            <div class="clear"></div>
          </div>
          {! FINE commenti della singola slide !}
      
          {! form commenti !}
          <div id="comment_form" style="display:none;">
            <form action="#">
              <p class="alert"><a href="">Login</a> or <a href="">Signin</a> to add a comment</p>
              <textarea name="comment"></textarea>
              <input type="submit" value="Publish" />
              <div class="clear"></div>
            </form>
          </div>
      
          {! fine form commenti !}
          <div class="item_comment">
            <p><span class="user">Emanuele Tortolone,</span> <span class="time">2h ago</span> on slide <a href="javascript:void(0)" class="slide_title">"Titolo slide 1"</a> - <a href="javascript:void(0)" class="slide_time">minute 01:51</a> </p>
            <div class="text_comment">
              Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum id sem eget urna malesuada euismod pellentesque et mauris. Nulla tempus est sit amet ante bibendum ullamcorper eget quis neque. Ut in diam in turpis ultricies facilisis. Aenean dictum blandit quam. Aenean quam ante, pretium ac placerat bibendum, sagittis ac enim.
            </div>
          </div>
          <div class="item_comment">
            <p><span class="user">Emanuele Tortolone,</span> <span class="time">2h ago</span> on slide <a href="javascript:void(0)" class="slide_title">"Titolo slide 1"</a> - <a href="javascript:void(0)" class="slide_time">minute 01:51</a> </p>
            <div class="text_comment">
              Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum id sem eget urna malesuada euismod pellentesque et mauris. Nulla tempus est sit amet ante bibendum ullamcorper eget quis neque. Ut in diam in turpis ultricies facilisis. Aenean dictum blandit quam. Aenean quam ante, pretium ac placerat bibendum, sagittis ac enim.
            </div>
          </div>
          <div class="item_comment">
            <p><span class="user">Emanuele Tortolone,</span> <span class="time">2h ago</span> on slide <a href="javascript:void(0)" class="slide_title">"Titolo slide 1"</a> - <a href="javascript:void(0)" class="slide_time">minute 01:51</a> </p>
            <div class="text_comment">
              Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum id sem eget urna malesuada euismod pellentesque et mauris. Nulla tempus est sit amet ante bibendum ullamcorper eget quis neque. Ut in diam in turpis ultricies facilisis. Aenean dictum blandit quam. Aenean quam ante, pretium ac placerat bibendum, sagittis ac enim.
            </div>
          </div>
        </div>
        <div class="paging">
          <span class="current">1</span> .
          <span><a href="javascript:void(0)">2</a></span> .
          <span><a href="javascript:void(0)">3</a></span>
        </div>
      </div>
      {! fine box commenti !}
              
      {! box capitoli !}
      <div id="chapters" class="box8" style="display:none;">
        <h5>Chapters</h5>
        <ol>
          {#slides}
            <li {css}><a chapter_index="{chapter_index}" slide_index="{slide_index}" href="javascript:void(0)">{index}. {title} &mdash; {duration}</a></li>
          {/slides}
        </ol>
      </div>
      {! fine box capitoli !}
              
      {! box embed !}
      <div id="embed" class="box8" style="display:none">
        <h5>Embed</h5>
        <textarea><iframe width="960" height="800" src="http://www.presentz.org/embed/21X1Q_mhVWE" frameborder="0"></iframe></textarea>
      </div>
      {! fine box embed !}
      
      {! box share !}
      <div id="share" class="box8" style="display:none">
        <h5>Share</h5>
        <ul>
          <li class="li_share_facebook"><a href="javascript:fbShare();" title="Condividi su Facebook">Facebook</a></li>
          <li class="li_share_twitter"><a href="javascript:twitterShare();" title="Condividi su Twitter">Twitter</a></li>
          <li class="li_share_gplus"><a href="javascript:plusShare();" title="Condividi su Google Plus">Google Plus</a></li>
        </ul>
      </div>
      {! fine box share !}
    </div>
    <div class="clear"></div>
  </div>
</section>
{/body}

{<presentz}
<script src="/assets/js/{assetsCacheHashes.js_main}/pres.js" type="text/javascript"></script>
<script type="text/javascript">
presentz = new Presentz("#player_video", "460x420", "#slideshow_player", "460x420");
function initPresentz(presentation) {
  function oneBasedAbsoluteSlideIndex(presentation, chapterIndex, slideIndex) {
    var absoluteSlideIndex = 0;
    for (var i = 0; i < chapterIndex; i++ ) {
      absoluteSlideIndex += presentation.chapters[i].media.slides.length;
    }
    return absoluteSlideIndex + slideIndex + 1;
  }
  presentz.on("slidechange", function(previousChapterIndex, previousSlideIndex, newChapterIndex, newSlideIndex) {
    var fromSlide = oneBasedAbsoluteSlideIndex(presentation, previousChapterIndex, previousSlideIndex);
    var toSlide = oneBasedAbsoluteSlideIndex(presentation, newChapterIndex, newSlideIndex);

    var $from = $("#controls .chapter:nth-child(" + fromSlide + ")");
    $from.removeClass("selected");
    $from.addClass("past");

    var $to = $("#controls .chapter:nth-child(" + toSlide + ")");
    $to.removeClass("past");
    $to.addClass("selected");
  });

  presentz.init(presentation);
  presentz.changeChapter(0, 0, false);
}
function openPopupTo(width, height, url) {
  var left = (screen.width - width) / 2;
  if (left < 0) {
    left = 0;
  }
  var top = (screen.height - height) / 2;
  if (top < 0) {
    top = 0;
  }
  window.open(url, "share", "height=" + height + ",location=no,menubar=no,width=" + width + ",top=" + top + ",left=" + left);
}
function fbShare() {
  openPopupTo(640, 350, "https://www.facebook.com/sharer.php?u=" + encodeURIComponent(document.location) + "&t=" + encodeURIComponent(document.title));
}

function twitterShare() {
  openPopupTo(640, 300, "https://twitter.com/intent/tweet?text=" + encodeURIComponent(document.title + " " + document.location + " via @presentzorg"));
}

function plusShare() {
  openPopupTo(640, 350, "https://plus.google.com/share?url=" + encodeURIComponent(document.location));
}
</script>
<script src="{to_json_url}?jsoncallback=initPresentz" type="text/javascript"></script>
{/presentz}